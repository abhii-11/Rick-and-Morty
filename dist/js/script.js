var completeData,checkboxValues=JSON.parse(localStorage.getItem("checkboxValues"))||{},$checkboxes=$(".js-filters :checkbox"),sortType="ascending",rickMortyShow={init:function(){$.get("https://rickandmortyapi.com/api/character/",function(s,t){completeData=s.results,rickMortyShow.fillData()})},fillData:function(){$(".js-profiles").empty(),completeData.map(function(s){"ascending"===sortType?$(".js-profiles").append('<div class="col-xs-12 col-sm-6 col-md-3"><div class="card"><div class="image-block"><img class="img-responsive" src="'+s.image+'" alt="Chania"><div class="main-info"><h4 class="js-name">'+s.name+"</h4><p>id:"+s.id+'- Created 2 years ago</p></div></div><div class="info-block"><div class="table-responsive"><table class="table"><tbody><tr><td><span>Status</span></td><td class="text-right"><span class="yellow">'+s.status+'</span></td></tr><tr><td><span>Species</span></td><td class="text-right"><span class="yellow js-species" data-type="'+s.species.toLowerCase()+'">'+s.species+'</span></td></tr><tr><td><span>Gender</span></td><td class="text-right"><span class="yellow js-gender" data-type="'+s.gender.toLowerCase()+'">'+s.gender+'</span></td></tr><tr><td><span>Origin</span></td><td class="text-right"><span class="yellow">'+s.origin.name+'</span></td></tr><tr><td><span>Last <br/>Location</span></td><td class="text-right"><span class="yellow">'+s.location.name+"</span></td></tr></tbody></table></div></div></div></div>"):$(".js-profiles").prepend('<div class="col-xs-12 col-sm-6 col-md-3"><div class="card"><div class="image-block"><img class="img-responsive" src="'+s.image+'" alt="Chania"><div class="main-info"><h4 class="js-name">'+s.name+"</h4><p>id:"+s.id+'- Created 2 years ago</p></div></div><div class="info-block"><div class="table-responsive"><table class="table"><tbody><tr><td><span>Status</span></td><td class="text-right"><span class="yellow">'+s.status+'</span></td></tr><tr><td><span>Species</span></td><td class="text-right"><span class="yellow js-species" data-type="'+s.species.toLowerCase()+'">'+s.species+'</span></td></tr><tr><td><span>Gender</span></td><td class="text-right"><span class="yellow js-gender" data-type="'+s.gender.toLowerCase()+'">'+s.gender+'</span></td></tr><tr><td><span>Origin</span></td><td class="text-right"><span class="yellow">'+s.origin.name+'</span></td></tr><tr><td><span>Last <br/>Location</span></td><td class="text-right"><span class="yellow">'+s.location.name+"</span></td></tr></tbody></table></div></div></div></div>")}),this.bindUI()},bindUI:function(){this.onLoadCheckBoxHandler(),this.checkboxClickHandler(),$(document).on("click",".js-remove-pills",this.removePill),$(document).on("change",$checkboxes,this.checkboxClickHandler),$(document).on("keydown",".js-search-by-name",this.filterContentByName),$(document).on("change",".js-sort",this.sortData)},onLoadCheckBoxHandler:function(){var s="";$.each(checkboxValues,function(t,e){e&&(s+="#"+t+",")}),s=s.slice(0,s.length-1),$(s).trigger("click")},checkboxClickHandler:function(){$checkboxes.each(function(s){this.checked?checkboxValues[this.id]=this.checked:delete checkboxValues[this.id]}),localStorage.setItem("checkboxValues",JSON.stringify(checkboxValues)),rickMortyShow.renderPills()},renderPills:function(){var s=$(".js-pills-container");s.empty(),$.each(checkboxValues,function(t,e){s.append('<span class="pills">'+t+'<i class="glyphicon glyphicon-remove js-remove-pills" data-id="'+t+'"></i></span>')}),$(".js-pills-container").children().length?($(".js-pills-block").show("slow"),this.filterContentByFilters()):($(".js-pills-block").hide("slow"),$(".js-profiles>div").show("slow"))},removePill:function(){var s=$(this).data("id");$("#"+s).trigger("click")},filterContentByFilters:function(){var s=$(".card");s.parent().hide(),$.each(checkboxValues,function(t,e){s.each(function(){$(this).find("[data-type="+t+"]").length&&$(this).parent().show("slow")})})},filterContentByName:function(){$(".js-remove-pills").each(function(){$(this).trigger("click")});var s=$(".js-search-by-name").val().toLowerCase();$(".js-name").each(function(){$(this).text().toLowerCase().trim().indexOf(s)>=0?$(this).closest(".card").parent().show():$(this).closest(".card").parent().hide()})},sortData:function(){sortType=$(this).find(":selected").attr("data-sort-type"),rickMortyShow.fillData()}};rickMortyShow.init();